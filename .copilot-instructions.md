# Global Copilot Instructions

* Prioritize **minimal scope**: only edit code directly implicated by the failing test.  
* Protect existing functionality: do **not** delete or refactor code outside the immediate test context.
* Before deleting any code, follow the "Coverage & Code Safety" guidelines below.

Copilot, do not modify any files under .lad/.
All edits must occur outside .lad/, or in prompts/ when explicitly updating LAD itself.

Coding & formatting
* Follow PEP 8; run Black.
* Use type hints everywhere.
* External dependencies limited to numpy, pandas, requests.
* Target Python 3.11.

Testing & linting
* Write pytest unit tests mirroring module paths.
* Run flake8 with `--max-complexity=10`; keep complexity â‰¤ 10.
* Every function/class **must** include a **NumPy-style docstring** (Sections: Parameters, Returns, Raises, Examples).

Coverage & Code Safety
* For safety checks, do **not** run coverage inside VS Code.  
  Instead, ask the user:
  > "Please run in your terminal:  
  > ```bash
  > python -m pytest --cov={{PROJECT_NAME}} --cov-context=test -q && coverage html -d coverage_html
  > ```  
  > then reply **coverage complete**."

* Before deleting code, verify:
  1. 0% coverage via `coverage report --show-missing`
  2. Absence from Level-2 API docs  
  If both hold, prompt:
  
  Delete <name>? (y/n)
  Reason: 0% covered and not documented.
  (Tip: use VS Code "Find All References" on <name>.)

Commits
* Use Conventional Commits. Example:  
  `feat(pipeline-filter): add ROI masking helper`
* Keep body as bullet list of sub-tasks completed.

Docs
* High-level docs live under the target project's `docs/` and are organised in three nested levels using `<details>` tags.
